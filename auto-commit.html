<!doctype html>
<html lang="en">
	<head>
		<link rel="alternate" type="application/atom+xml" href="/rss.xml" />
		<meta charset="utf-8" />
		<link rel="icon" href="./favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
		
		<link href="./_app/immutable/assets/0.B4ddDIYf.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.DD6wkgOe.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/entry.B8ujY8d0.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/runtime.TltWRlxk.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/control.CYgJF_JY.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app._1UjbMkC.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/preload-helper.NyLI2eXJ.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/disclose-version.DuSvYA5c.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.CMaOuoDW.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/config.gC28cI-t.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/5.D6rdt74x.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/utils.TJqkjg7i.js"><title>AutoCommit</title><!--ssr:0--><meta property="og:type" content="article"> <meta property="og:title" content="AutoCommit"><!--ssr:0-->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--ssr:0--><!--ssr:1--><!--ssr:if:true--><!--ssr:3--><div class="layout"><!--ssr:4--><nav><a href="./" class="title"><b>Strani Anelli</b></a> <ul class="links"><li><a href="./about">About</a></li> <li><a href="./contact">Contact</a></li> <li><a href="./rss.xml" target="_blank">RSS</a></li></ul></nav><!--ssr:4--> <main><!--ssr:5--><!--ssr:7--><div class="transition svelte-vcdv4c"><!--ssr:8--><!--ssr:9--><!--ssr:10--><article><hgroup><h1>AutoCommit</h1> <p>Published at May 5, 2024</p></hgroup> <div class="tags"><!--ssr:11--><!--ssr:14--><span class="surface-4">#Filosofia Classica</span><!--ssr:14--><!--ssr:15--><span class="surface-4">#Filosofia Moderna</span><!--ssr:15--><!--ssr:11--></div> <div class="cover-image"><!--ssr:12--><!--ssr:if:true--><!--ssr:16--><!--ssr:if:false--><img src="https://github.com/el3um4s/memento-sveltekit-and-github-pages/raw/main/src/posts//auto-commit/c8185e32e5ecaa63c075f034b40a8d90.png" alt="" loading="lazy"><!--ssr:16--><!--ssr:12--></div> <div class="prose"><!--ssr:13--><!--ssr:17--><!--ssr:18--><img src="/_app/immutable/assets/c8185e32e5ecaa63c075f034b40a8d90.Dl8usqYa.png" alt="Immagine che contiene testo, Carattere, numero, linea Descrizione generata automaticamente"> <!--ssr:19--><pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"><span style="color:#5DE4C7">import </span><span style="color:#A6ACCD">&#123;</span><span style="color:#ADD7FF"> simpleGit</span><span style="color:#A6ACCD"> &#125;</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">simple-git</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">path</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">path</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#5DE4C7">import </span><span style="color:#ADD7FF">fs</span><span style="color:#A6ACCD"> from</span><span style="color:#A6ACCD"> '</span><span style="color:#5DE4C7">fs</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> checkDirectorySync</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">dir</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> &#123;</span></span>
<span class="line"><span style="color:#91B4D5">	let</span><span style="color:#E4F0FB"> err</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#D0679D">	try</span><span style="color:#A6ACCD"> &#123;</span></span>
<span class="line"><span style="color:#E4F0FB">		fs</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">statSync</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">dir</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	&#125; </span><span style="color:#D0679D">catch</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">e</span><span style="color:#A6ACCD">) &#123;</span></span>
<span class="line"><span style="color:#E4F0FB">		err</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> e</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">	&#125;</span></span>
<span class="line"><span style="color:#5DE4C7C0">	return</span><span style="color:#E4F0FB"> err</span><span style="color:#91B4D5"> ===</span><span style="color:#D0679D"> undefined</span><span style="color:#91B4D5"> ?</span><span style="color:#5DE4C7"> true</span><span style="color:#91B4D5"> :</span><span style="color:#D0679D"> false</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#ADD7FF"> gitRootPath</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">dir</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> &#123;</span></span>
<span class="line"><span style="color:#E4F0FB">	dir</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> dir</span><span style="color:#91B4D5"> ||</span><span style="color:#E4F0FB"> path</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">resolve</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">.</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	if (</span><span style="color:#91B4D5">!</span><span style="color:#E4F0FBD0">checkDirectorySync</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">dir</span><span style="color:#A6ACCD">)) &#123;</span></span>
<span class="line"><span style="color:#E4F0FB">		console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">error</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error: Path is invalid</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">		process</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">exit</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">1</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	&#125;</span></span>
<span class="line"><span style="color:#A6ACCD">	if (</span><span style="color:#E4F0FBD0">checkDirectorySync</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">path</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">resolve</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">dir</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">.git</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">))) &#123;</span></span>
<span class="line"><span style="color:#5DE4C7C0">		return</span><span style="color:#E4F0FB"> dir</span><span style="color:#A6ACCD">;</span></span>
<span class="line"><span style="color:#A6ACCD">	&#125; else &#123;</span></span>
<span class="line"><span style="color:#91B4D5">		const</span><span style="color:#E4F0FB"> parent</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FB"> path</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">resolve</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">dir</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">..</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		if (</span><span style="color:#E4F0FB">parent</span><span style="color:#91B4D5"> ===</span><span style="color:#E4F0FB"> dir</span><span style="color:#A6ACCD">) &#123;</span></span>
<span class="line"><span style="color:#E4F0FB">			console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">error</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Error: This directory is not a git repository</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#E4F0FB">			process</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">exit</span><span style="color:#A6ACCD">(</span><span style="color:#5DE4C7">1</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">		&#125;</span></span>
<span class="line"><span style="color:#5DE4C7C0">		return</span><span style="color:#E4F0FBD0"> gitRootPath</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">parent</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	&#125;</span></span>
<span class="line"><span style="color:#A6ACCD">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B4D5">const</span><span style="color:#E4F0FB"> git</span><span style="color:#91B4D5"> =</span><span style="color:#E4F0FBD0"> simpleGit</span><span style="color:#A6ACCD">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E4F0FB">git</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">exec</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Starting push...</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">))</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">addConfig</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">user.name</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Samuele de Tomasi</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">addConfig</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">user.mail</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">samuele@stranianelli.com</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">addConfig</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">user.branch</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, </span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">main</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">)</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">add</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FBD0">gitRootPath</span><span style="color:#A6ACCD">())</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">commit</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">commit</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">, (</span><span style="color:#E4F0FB">a</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">b</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> &#123;</span></span>
<span class="line"><span style="color:#E4F0FB">		console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#E4F0FB">a</span><span style="color:#A6ACCD">, </span><span style="color:#E4F0FB">b</span><span style="color:#A6ACCD">);</span></span>
<span class="line"><span style="color:#A6ACCD">	&#125;)</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">push</span><span style="color:#A6ACCD">()</span></span>
<span class="line"><span style="color:#A6ACCD">	.</span><span style="color:#E4F0FBD0">exec</span><span style="color:#A6ACCD">(() </span><span style="color:#91B4D5">=></span><span style="color:#E4F0FB"> console</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FBD0">log</span><span style="color:#A6ACCD">(</span><span style="color:#A6ACCD">'</span><span style="color:#5DE4C7">Push done.</span><span style="color:#A6ACCD">'</span><span style="color:#A6ACCD">));</span></span></code></pre><!--ssr:19--><!--ssr:18--><!--ssr:17--><!--ssr:13--></div></article><!--ssr:10--><!--ssr:9--><!--ssr:8--></div><!--ssr:7--><!--ssr:5--></main> <!--ssr:6--><footer><p>Strani Anelli © 2024</p></footer><!--ssr:6--></div><!--ssr:3--><!--ssr:1--> <!--ssr:2--><!--ssr:if:false--><!--ssr:2--><!--ssr:0-->
			
			<script>
				{
					__sveltekit_gq3ese = {
						base: new URL(".", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("./_app/immutable/entry/start.DD6wkgOe.js"),
						import("./_app/immutable/entry/app._1UjbMkC.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
